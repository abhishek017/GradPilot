<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Stage Display</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: #000;
      color: #fff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      overflow: hidden;
    }

    /* Background gradient + subtle spotlight */
    body {
      background:
        radial-gradient(circle at 50% 10%, rgba(255, 255, 255, 0.12), transparent 55%),
        radial-gradient(circle at 0% 100%, rgba(255, 215, 0, 0.18), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(255, 105, 180, 0.16), transparent 60%),
        #000;
      position: relative;
    }

    .wrapper {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      height: 100%;
      text-align: center;
      z-index: 2; /* above glitter & stars */
      padding: 1.5rem;
    }

    .name {
      font-size: 4rem;
      font-weight: 700;
      margin-bottom: 1rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      text-shadow:
        0 0 10px rgba(255, 255, 255, 0.6),
        0 0 25px rgba(255, 215, 0, 0.8);
      animation: nameGlow 4s ease-in-out infinite;
    }

    .meta {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #f3f3f3;
    }

    img {
      box-shadow:
        0 0 20px rgba(0, 0, 0, 0.8),
        0 0 40px rgba(255, 255, 255, 0.2);
    }

    @keyframes nameGlow {
      0%, 100% {
        text-shadow:
          0 0 10px rgba(255, 255, 255, 0.5),
          0 0 22px rgba(255, 215, 0, 0.7);
        transform: translateY(0);
      }
      50% {
        text-shadow:
          0 0 14px rgba(255, 255, 255, 0.9),
          0 0 30px rgba(255, 215, 0, 1);
        transform: translateY(-2px);
      }
    }

    @media (max-width: 1024px) {
      .name { font-size: 3rem; }
      .meta { font-size: 1.4rem; }
    }

    @media (max-width: 768px) {
      .name { font-size: 2.4rem; }
      .meta { font-size: 1.1rem; }
      img { max-height: 35vh !important; }
    }

    /* Twinkling stars background */
    .stars-layer {
      position: fixed;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
      z-index: 0;
    }

    .star {
      position: absolute;
      width: 3px;
      height: 3px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.75);
      opacity: 0;
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
      animation: starTwinkle 6s ease-in-out infinite;
    }

    @keyframes starTwinkle {
      0%, 100% { opacity: 0; transform: scale(0.6); }
      50% { opacity: 0.9; transform: scale(1.3); }
    }

    /* Glitter / confetti-like sparkles from corners */
    .glitter-layer {
      position: fixed;
      bottom: 0;
      width: 50%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 1;
    }

    .glitter-left { left: 0; }
    .glitter-right { right: 0; }

    .sparkle {
      position: absolute;
      bottom: -20px;
      border-radius: 50%;
      background:
        radial-gradient(circle, #fff, #ffe9a8 45%, transparent 75%);
      opacity: 0;
      filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.9));
    }

    /* Different sparkle sizes */
    .s1 { width: 4px; height: 4px; }
    .s2 { width: 6px; height: 6px; }
    .s3 { width: 8px; height: 8px; }
    .s4 { width: 10px; height: 10px; }

    /* Animate left side upwards & slightly inward */
    .glitter-left .sparkle {
      animation: riseLeft 6s linear infinite;
    }

    /* Animate right side upwards & slightly inward */
    .glitter-right .sparkle {
      animation: riseRight 6s linear infinite;
    }

    @keyframes riseLeft {
      0% {
        transform: translate3d(0, 0, 0) scale(1);
        opacity: 0;
      }
      10% {
        opacity: 0.9;
      }
      100% {
        transform: translate3d(-80px, -140vh, 0) scale(0.5);
        opacity: 0;
      }
    }

    @keyframes riseRight {
      0% {
        transform: translate3d(0, 0, 0) scale(1);
        opacity: 0;
      }
      10% {
        opacity: 0.9;
      }
      100% {
        transform: translate3d(80px, -140vh, 0) scale(0.5);
        opacity: 0;
      }
    }
  </style>

</head>
<body>

<!-- Background twinkling stars -->
<div class="stars-layer">
  <!-- Hard-coded stars in various positions -->
  <div class="star" style="top: 5%; left: 10%; animation-delay: 0s;"></div>
  <div class="star" style="top: 12%; left: 35%; animation-delay: 1.5s;"></div>
  <div class="star" style="top: 20%; left: 70%; animation-delay: 0.8s;"></div>
  <div class="star" style="top: 30%; left: 15%; animation-delay: 2.1s;"></div>
  <div class="star" style="top: 38%; left: 50%; animation-delay: 3s;"></div>
  <div class="star" style="top: 45%; left: 80%; animation-delay: 1.2s;"></div>
  <div class="star" style="top: 55%; left: 25%; animation-delay: 2.8s;"></div>
  <div class="star" style="top: 62%; left: 60%; animation-delay: 4s;"></div>
  <div class="star" style="top: 70%; left: 90%; animation-delay: 3.3s;"></div>
  <div class="star" style="top: 18%; left: 90%; animation-delay: 2.4s;"></div>
  <div class="star" style="top: 80%; left: 40%; animation-delay: 1.9s;"></div>
  <div class="star" style="top: 85%; left: 10%; animation-delay: 0.6s;"></div>
</div>

<div class="wrapper">
  {% if current %}
    <img id="student-photo" src="{% if current.photo %}{{ current.photo.url }}{% else %}{% static 'ceremony/default_silhouette_grey.png' %}{% endif %}"
        style="max-height:45vh; border-radius:20px; margin-bottom:20px;">

    <div class="name" id="student-name">{{ current.display_name }}</div>
    <div class="meta" id="student-meta"> {{ current.qualification }}</div>
  {% else %}
    <img id="student-photo" src="{% static 'ceremony/brighton-logo.png' %}"
        style="max-height:45vh; border-radius:20px; margin-bottom:20px;">
    <div class="name" id="student-name">Graduation Ceremony</div>
    <div class="meta" id="student-meta">Brighton College</div>
  {% endif %}
</div>

<!-- Glitter / sparkles from both corners -->

<!-- LEFT SIDE -->
<div class="glitter-layer glitter-left">
  <!-- 20 sparkles on left side with varied positions, delays & sizes -->
  <div class="sparkle s1" style="left: 5%; animation-delay: 0s; animation-duration: 5s;"></div>
  <div class="sparkle s2" style="left: 10%; animation-delay: 0.5s; animation-duration: 6s;"></div>
  <div class="sparkle s3" style="left: 15%; animation-delay: 1.2s; animation-duration: 7s;"></div>
  <div class="sparkle s2" style="left: 20%; animation-delay: 1.8s; animation-duration: 5.5s;"></div>
  <div class="sparkle s4" style="left: 25%; animation-delay: 0.9s; animation-duration: 6.5s;"></div>
  <div class="sparkle s1" style="left: 30%; animation-delay: 2.3s; animation-duration: 5.8s;"></div>
  <div class="sparkle s2" style="left: 35%; animation-delay: 1.1s; animation-duration: 7.2s;"></div>
  <div class="sparkle s3" style="left: 40%; animation-delay: 2.7s; animation-duration: 6.8s;"></div>
  <div class="sparkle s2" style="left: 45%; animation-delay: 0.3s; animation-duration: 5.3s;"></div>
  <div class="sparkle s1" style="left: 8%; animation-delay: 1.6s; animation-duration: 6.2s;"></div>
  <div class="sparkle s3" style="left: 18%; animation-delay: 2.1s; animation-duration: 7.5s;"></div>
  <div class="sparkle s2" style="left: 28%; animation-delay: 0.7s; animation-duration: 6.1s;"></div>
  <div class="sparkle s4" style="left: 38%; animation-delay: 1.9s; animation-duration: 7.8s;"></div>
  <div class="sparkle s1" style="left: 12%; animation-delay: 2.5s; animation-duration: 5.7s;"></div>
  <div class="sparkle s2" style="left: 22%; animation-delay: 0.2s; animation-duration: 6.4s;"></div>
  <div class="sparkle s3" style="left: 32%; animation-delay: 1.4s; animation-duration: 7.1s;"></div>
  <div class="sparkle s2" style="left: 42%; animation-delay: 2.9s; animation-duration: 6.9s;"></div>
  <div class="sparkle s1" style="left: 6%; animation-delay: 1.3s; animation-duration: 5.2s;"></div>
  <div class="sparkle s3" style="left: 16%; animation-delay: 2.8s; animation-duration: 7.4s;"></div>
  <div class="sparkle s2" style="left: 26%; animation-delay: 0.4s; animation-duration: 6.7s;"></div>
</div>

<!-- RIGHT SIDE -->
<div class="glitter-layer glitter-right">
  <!-- 20 sparkles on right side with varied positions, delays & sizes -->
  <div class="sparkle s1" style="right: 5%; animation-delay: 0.3s; animation-duration: 5.4s;"></div>
  <div class="sparkle s2" style="right: 10%; animation-delay: 1.0s; animation-duration: 6.3s;"></div>
  <div class="sparkle s3" style="right: 15%; animation-delay: 1.7s; animation-duration: 7.1s;"></div>
  <div class="sparkle s2" style="right: 20%; animation-delay: 2.2s; animation-duration: 5.6s;"></div>
  <div class="sparkle s4" style="right: 25%; animation-delay: 0.6s; animation-duration: 6.8s;"></div>
  <div class="sparkle s1" style="right: 30%; animation-delay: 2.6s; animation-duration: 5.9s;"></div>
  <div class="sparkle s2" style="right: 35%; animation-delay: 1.2s; animation-duration: 7.4s;"></div>
  <div class="sparkle s3" style="right: 40%; animation-delay: 2.4s; animation-duration: 6.6s;"></div>
  <div class="sparkle s2" style="right: 45%; animation-delay: 0.1s; animation-duration: 5.5s;"></div>
  <div class="sparkle s1" style="right: 8%; animation-delay: 1.8s; animation-duration: 6.1s;"></div>
  <div class="sparkle s3" style="right: 18%; animation-delay: 2.9s; animation-duration: 7.3s;"></div>
  <div class="sparkle s2" style="right: 28%; animation-delay: 0.9s; animation-duration: 6.2s;"></div>
  <div class="sparkle s4" style="right: 38%; animation-delay: 1.5s; animation-duration: 7.7s;"></div>
  <div class="sparkle s1" style="right: 12%; animation-delay: 2.0s; animation-duration: 5.8s;"></div>
  <div class="sparkle s2" style="right: 22%; animation-delay: 0.7s; animation-duration: 6.5s;"></div>
  <div class="sparkle s3" style="right: 32%; animation-delay: 1.9s; animation-duration: 7.2s;"></div>
  <div class="sparkle s2" style="right: 42%; animation-delay: 2.7s; animation-duration: 6.4s;"></div>
  <div class="sparkle s1" style="right: 6%; animation-delay: 1.4s; animation-duration: 5.3s;"></div>
  <div class="sparkle s3" style="right: 16%; animation-delay: 2.3s; animation-duration: 7.0s;"></div>
  <div class="sparkle s2" style="right: 26%; animation-delay: 0.5s; animation-duration: 6.9s;"></div>
</div>

<script>
  let lastID = null;

  function checkUpdate() {
    fetch("{% url 'current_student_api' %}")
      .then(response => response.json())
      .then(data => {
        if (data.id && data.id !== lastID) {
          lastID = data.id;

          // Update fields without refreshing the page
          document.getElementById("student-name").innerText = data.name;
          document.getElementById("student-meta").innerText = data.qualification;

          if (data.photo) {
            document.getElementById("student-photo").src = data.photo;
          } else {
            document.getElementById("student-photo").src = "{% static 'ceremony/default_silhouette_grey.png' %}";
          }
        }
      })
      .catch(error => console.log(error));
  }

  // Check every 1000ms (1 second)
  setInterval(checkUpdate, 1000);
</script>


</body>
</html>
